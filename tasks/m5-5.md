# M5-5: チート対策・入力バリデーション強化

読むファイル: PlayerMovement.cs, ComboSystem.cs, HitboxSystem.cs, GameConfig.cs
変更ファイル: PlayerMovement.cs, ComboSystem.cs, HitboxSystem.cs, 新規 Scripts/Server/AntiCheat.cs

サーバー側のチート対策を強化する。

1. 新規 Scripts/Server/AntiCheat.cs：
   - MonoBehaviour（サーバー専用、シングルトン）
   - 各種チート検出ロジックを集約

2. 速度チェック:
   - PlayerMovement.cs: 1ティックの移動距離が理論最大値を超えていないか検証
   - 移動速度 × deltaTime × 余裕係数(1.5) を超えたら補正
   - 連続違反でキック

3. 入力レートチェック:
   - ServerRpc の呼び出し頻度を監視
   - 1秒あたりの入力送信数が上限を超えたら無視
   - CLAUDE.mdの CLIENT_SEND_RATE(30Hz) を基準に判定

4. コンボ不正チェック:
   - ComboSystem.cs: コンボ段数の飛ばしを検出
   - N1→N4直接遷移等の不正シーケンスをブロック
   - 連撃強化レベルに応じた上限チェック強化

5. ダメージ検証:
   - HitboxSystem.cs: ヒット判定の距離チェック強化
   - 攻撃者と被弾者の距離が武器リーチ × 余裕係数を超えていたら無効化

6. GameConfig.cs に追加：
   - ANTICHEAT_SPEED_TOLERANCE = 1.5f
   - ANTICHEAT_INPUT_RATE_LIMIT = 35（1秒あたり）
   - ANTICHEAT_MAX_VIOLATIONS = 10（キックまでの違反数）
   - ANTICHEAT_RANGE_TOLERANCE = 1.5f

git commit -m "M5-5: チート対策・入力バリデーション強化"
