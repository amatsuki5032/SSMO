# M5-4: ロビー＆マッチメイキング

読むファイル: RelayManager.cs, TeamManager.cs, GameConfig.cs, HelloNetwork.cs
変更ファイル: 新規 Scripts/Netcode/LobbyManager.cs, HelloNetwork.cs, GameConfig.cs

Unity Lobby Serviceを使ったロビーシステムとマッチメイキングを実装する。

## 実装内容

1. 新規 Scripts/Netcode/LobbyManager.cs：
   - MonoBehaviour（シングルトン）
   - ロビー作成（CreateLobby）: 名前 + maxPlayers(8) + isPrivate
   - ロビー参加（JoinLobby）: ロビーID or クイックマッチ
   - ロビー一覧取得（QueryLobbies）: 公開ロビーのリスト
   - ハートビート送信（15秒間隔、ホスト側）
   - ロビーデータ同期: プレイヤー名、チーム選択、Ready状態
   - 全員Ready → ホストが RelayManager.CreateRelay() → JoinCode をロビーデータに書き込み → 全員接続

2. ロビーデータ構造：
```
Lobby:
  - Name: string
  - MaxPlayers: 8
  - Data:
    - RelayJoinCode: string（ゲーム開始時にホストが設定）
    - GamePhase: "lobby" / "starting" / "ingame"
  - Players[]:
    - Data:
      - DisplayName: string
      - Team: "red" / "blue" / "auto"
      - IsReady: "true" / "false"
```

3. HelloNetwork.cs 大幅改修：
   - 接続UI → ロビーUI に変更
   - 画面: ロビー作成 / ロビー一覧 / ロビー内（チーム選択+Ready）
   - OnGUI ベースで実装（M6でuGUI移行）

4. GameConfig.cs に追加：
   - LOBBY_HEARTBEAT_INTERVAL = 15f
   - LOBBY_POLL_INTERVAL = 2f（ロビーデータ更新確認間隔）

## Unity手動設定 🔧
- Unity Dashboard で Lobby Service を有効化
- com.unity.services.lobby パッケージを追加（Package Manager）

## マッチメイキングフロー
1. プレイヤー → ロビー作成 or 公開ロビーに参加
2. ロビー内でチーム選択（赤/青/自動）+ Ready
3. ホストが全員Readyを確認 → 「ゲーム開始」ボタン
4. Relay確保 → JoinCodeをロビーに書き込み → 全員NGO接続
5. 全員接続完了 → GameModeManager が試合開始

git commit -m "M5-4: ロビー＆マッチメイキング"
