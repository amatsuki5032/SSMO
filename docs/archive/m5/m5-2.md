# M5-2: Firestore プレイヤーデータ保存

読むファイル: AuthManager.cs, WeaponData.cs, GameConfig.cs, CharacterState.cs
変更ファイル: 新規 Scripts/Netcode/PlayerDataManager.cs, GameConfig.cs

Firestoreでプレイヤーの永続データを保存・読み込みする。

## 実装内容

1. 新規 Scripts/Netcode/PlayerDataManager.cs：
   - MonoBehaviour（シングルトン）
   - Firestore SDK初期化

2. PlayerData 構造体を定義：
```
players/{uid}/
  - displayName: string
  - weaponType1: int（メイン武器種）
  - weaponType2: int（サブ武器種、ブレイクチャージ用）
  - training: Dictionary<string, int>（鍛錬振り分け: atk/def/hp/musou等）
  - inscriptionC1: int（C1刻印番号）
  - inscriptionC6: int（C6刻印番号）
  - elementType: int（装備属性）
  - elementLevel: int（属性レベル）
  - wins: int / losses: int / kills: int / deaths: int
  - createdAt: Timestamp
  - lastLogin: Timestamp
```

3. 主要メソッド：
   - async Task<PlayerData> LoadPlayerData(string uid)
   - async Task SavePlayerData(string uid, PlayerData data)
   - async Task UpdateBattleResults(string uid, int kills, int deaths, bool won)

4. 戦闘開始時：サーバーがFirestoreからプレイヤーデータ読み込み → 武器種・属性・鍛錬をゲーム内に反映
5. 戦闘終了時：戦績を更新

6. GameConfig.cs に追加：
   - FIRESTORE_TIMEOUT = 5f

## Firestoreセキュリティルール（参考）
```
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /players/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
  }
}
```

git commit -m "M5-2: Firestoreプレイヤーデータ保存"
