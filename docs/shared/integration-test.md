# SSMO 統合テスト チェックリスト

> 全マイルストーンの動作確認用。ParrelSync 2人接続でテスト。
> 問題があればメモ欄に記録 → バグ修正タスクとしてBACKLOGに追加。
> 新マイルストーン完了時にセクションを追加していく。

---

## テスト環境
- Host + ParrelSync Clone（2人接続）
- Unity Editor上で実行
- デバッグキー: F1-F12（DebugTestHelper）

---

## M1: ネットワーク同期基盤

### 接続
- [x] Host起動が正常に完了する ✅M1確認済
- [x] Clone側でClient接続が成功する ✅M1確認済
- [x] 接続後にプレイヤーキャラ（箱人間）がスポーンする ✅M1確認済
- [x] NetworkStatsHUD（左上）にRTT/PacketLossが表示される ✅M1確認済

### 移動同期
- [x] WASD移動が両プレイヤーで正しく同期される ✅M1確認済
- [ ] 相手プレイヤーの動きがスムーズに見える（補間）⚠クライアント側ジッター報告あり
- [ ] 急に方向転換してもワープしない（クライアント予測）

### カメラ
- [ ] 3人称カメラが自キャラを追従する
- [ ] マウスでカメラ回転できる
- [ ] 壁にカメラがめり込まない（壁衝突回避）

---

## M2: 戦闘アクション

### 通常攻撃コンボ
- [x] N1→N2→N3→N4 が連鎖する ✅M2テスト中（NNNC=C4テストで暗黙確認）
- [ ] コンボ受付ウィンドウ（モーション最後30%）で次段入力可能
- [ ] 先行入力バッファ（150ms）が機能する
- [ ] コンボ中に方向転換可能（スティック入力）
- [ ] コンボ途中で入力やめるとIdleに戻る

### チャージ攻撃
- [ ] C1（△のみ）が発動する
- [x] N1→△ で C2（打ち上げ）が発動する ✅M2テスト中確認
- [ ] N1→N2→△ で C3（ラッシュ）が発動する
- [ ] C3中に△連打でラッシュ追加ヒットが出る
- [x] N1→N2→N3→△ で C4（吹き飛ばし）が発動する ✅M2テスト中「OK C4出てます」
- [ ] 最終段（N4）からはチャージ派生不可

### ダッシュ攻撃
- [x] 1.5秒以上移動後に□でダッシュ攻撃が発動する ✅M2-2c確認済（ダッシュ判定）
- [ ] ダッシュ攻撃→□連打でダッシュラッシュが出る
- [ ] ダッシュ攻撃はNコンボとは別系統（N移行しない）

### ジャンプ
- [x] N/.キーでジャンプする ✅M2-2b確認済（旧Space→N/.に変更）
- [ ] 方向+N/.で斜めジャンプする
- [ ] ジャンプ中は方向転換不可
- [ ] ジャンプ中□でジャンプ攻撃（JA）
- [ ] ジャンプ中△でジャンプチャージ（JC）
- [ ] 2段ジャンプ不可
- [ ] ジャンプ中ガード不可

### ヒット判定
- [ ] 攻撃が相手にヒットする（サーバー権威）
- [ ] ヒット時にダメージが適用される
- [ ] フレンドリーファイア無効（味方には当たらない）
- [ ] ラグコンペンセーションが機能する

### 被弾リアクション
- [ ] のけぞり（ヒットスタン）が発生する
- [ ] F1: 相手をヒットスタントグルで確認
- [x] C2ヒットで打ち上げが起きる ✅M2テスト中「うきました」確認
- [ ] F2: 打ち上げ（Launch）が発生する
- [ ] C4ヒットで吹き飛ばしが起きる
- [ ] 空中被弾でダメージ÷2（空中補正）
- [ ] 4種ダウン: 前のめり / 崩れ落ち / 仰向け / 気絶

### ダメージ計算
- [ ] HP青帯（50-100%）で等倍ダメージ
- [ ] HP黄帯（20-50%）でダメージ÷1.5（根性補正）
- [ ] HP赤帯（0-20%）でダメージ÷2（根性補正）
- [ ] F7: HPを20%に設定して根性補正テスト

### ガード
- [x] Shift（L1）押しっぱなしでガード状態になる ✅M2-2c確認済（ステート遷移ログ確認）
- [ ] 正面からの攻撃を完全カット（0ダメージ）
- [ ] 通常ガード時にノックバックが発生する
- [x] ガード移動（Shift+WASD）ができる ✅M2-2c確認済（方向修正後）
- [ ] 無双乱舞もガードできる
- [ ] F6: 相手をガード状態に強制トグル
- [ ] めくり（背面攻撃）でガードを崩せる
- [ ] F5: 相手を正面2mに移動（正面ガードテスト）
- [ ] F8: 相手を背面2mに移動（めくりテスト）

### エレメンタルガード (EG)
- [ ] ガード中に△約1秒押し込みでEG準備→完成
- [ ] EG完成中に攻撃を受けるとカウンター発動
- [ ] EGカウンターで攻撃者が吹き飛ぶ
- [ ] EG中はノックバックなし
- [ ] EG維持中に無双ゲージが減少する
- [ ] 無双ゲージ0でEG解除
- [ ] F4: 相手をEG展開トグル

### 無双乱舞
- [ ] F3: 無双ゲージをMAXにする
- [ ] ゲージMAXで○（Q）押しで無双乱舞発動
- [ ] 無双乱舞中は無敵
- [ ] 無双乱舞はガード可能（めくりでのみ通る）
- [ ] F7でHP20%→無双発動で真・無双乱舞になる
- [ ] 真・無双乱舞に炎属性が付与される
- [ ] のけぞり中に無双で脱出可能
- [ ] ゲージ非MAX時に○長押しで無双チャージ（その場停止）

### アーマーシステム
- [ ] F10: 相手のアーマー段階を変更
- [ ] アーマーNone（段階1）: 全攻撃でのけぞる
- [ ] N耐性（段階3）: 通常攻撃でのけぞらない
- [ ] SA（段階4）: チャージ攻撃でものけぞらない
- [ ] アーマーがあってもダメージは通る

### HP・死亡・リスポーン
- [ ] HPが0で Dead ステートになる
- [ ] 即リスポーンする（待ち時間なし）
- [ ] リスポーン時にHP全回復 + 無双ゲージMAX
- [ ] F9: 全員のHP全回復 + Dead復活

---

## M3: 4v4 対戦モード

### チーム管理 (TeamManager)
- [ ] 2人が赤/青の別チームに振り分けられる
- [ ] チーム色が見た目で区別できる

### スポーン (SpawnManager)
- [ ] 各プレイヤーが自チーム側のスポーン地点に配置される
- [ ] リスポーン地点が交互に変わる（同じ拠点に連続しない）

### マップ (MapGenerator)
- [ ] 100m×100m の地面が生成される
- [ ] 外壁（見えない壁）が機能する
- [ ] 拠点5個（中央1 + 赤2 + 青2）が色分けで表示される
- [ ] 障害物が配置される

### 拠点 (BasePoint)
- [ ] 拠点エリア内に入ると制圧ゲージが動く
- [ ] 自軍拠点内でHP自動回復が発動する
- [ ] 拠点の所属チームが変わる（Neutral→Red/Blue）

### NPC兵士 (NPCSoldier / NPCSpawner)
- [ ] 拠点から定期的にNPC兵士がスポーンする
- [ ] NPC兵士がチーム色で区別できる
- [ ] NPC兵士が敵に向かって移動する
- [ ] NPC兵士が攻撃範囲内で攻撃する
- [ ] NPC兵士を倒せる（ダメージが通る）
- [ ] NPC兵士のガード判定が機能する

### 仙箪 (SentanItem)
- [ ] NPC兵士死亡時に仙箪（金色の球）がドロップする
- [ ] 仙箪を拾える（近づくと自動取得）
- [ ] 仙箪カウントが増える
- [ ] 30秒経過で未取得の仙箪が消える

### UI - BattleHUD
- [ ] 画面下部に自キャラHPバーが表示される
- [ ] HPバーの色変化（青→黄→赤）が正しい
- [ ] 無双ゲージバーが表示される
- [ ] 無双ゲージMAX時に金色になる
- [ ] ターゲットHP（攻撃した敵）が画面上部に表示される
- [ ] NPC兵士のHPもターゲット表示される

### UI - MinimapHUD
- [ ] 画面右下にミニマップが表示される
- [ ] 自分（白）・味方（青）・敵（赤）のドットが表示される
- [ ] 拠点の所属チーム色（赤/青/灰）が表示される
- [ ] Mキーで全体マップ⇔ミニマップ切替が動作する

### UI - ScoreboardHUD
- [ ] 画面上部中央に残り時間タイマーが表示される
- [ ] タイマー左右に赤チーム撃破数 vs 青チーム撃破数が表示される
- [ ] プレイヤーを倒すとスコアが増える
- [ ] 試合終了時に勝敗テキストが表示される（VICTORY!/DEFEAT/DRAW）

### ゲームモード (GameModeManager)
- [ ] MIN_PLAYERS_TO_START（2人）で試合開始する
- [ ] 5分タイマーがカウントダウンする
- [ ] タイマー0で試合終了する
- [ ] 撃破数で勝敗が決まる

---

## M4: キャラクター＆コンテンツ（テスト追加用）

### 武器種 (WeaponData)
- [ ] 武器種ごとに移動速度が異なる
- [ ] 武器種ごとに攻撃リーチが異なる
- [ ] 武器種ごとにモーション倍率が異なる
- [ ] 武器種ごとにヒットボックスサイズが異なる

### 属性システム (ElementSystem)
- [ ] チャージ攻撃にのみ属性が乗る（通常攻撃には乗らない）
- [ ] 炎: 燃焼（持続ダメージ、HP0にはしない）
- [ ] 氷: 凍結（確率発動、約2秒行動不能）
- [ ] 雷: 感電（受け身不可）+ 気絶（地上のみ約3秒）
- [ ] 風: 鈍足（移動低下+ジャンプ不可）
- [ ] 斬: 防御無視 + HP&無双両方にダメージ

### 連撃強化 (ComboSystem)
- [ ] 連撃強化1回: N5 解放
- [ ] 連撃強化2回: N6 解放
- [ ] 連撃強化3回 + 無双MAX: エボリューション E6-E9

### 仙箪強化リング (EnhancementRing)
- [ ] 仙箪7個でリング回転開始
- [ ] R1（Eキー）でスロット発動
- [ ] 連撃強化スロットでコンボ段数増加
- [ ] ATKバフスロットで攻撃力+10%
- [ ] DEFバフスロットで防御力+10%
- [ ] 死亡時に全強化リセット（仙箪カウントは維持）

### 鍛錬システム (TrainingSystem)
- [ ] 鍛錬ポイント振り分けでATKが増加する
- [ ] 鍛錬ポイント振り分けでDEFが増加する
- [ ] 鍛錬ポイント振り分けでHPが増加する
- [ ] 三角数コスト（1段目=1, 2段目=3, 3段目=6...）が正しい
- [ ] ポイント上限（24）を超える振り分けが不可

### 刻印システム (ComboSystem)
- [ ] C1刻印設定でC1モーション倍率が変わる（突/陣/砕/盾）
- [ ] C6刻印設定でC6モーション倍率が変わる（突/陣/砕/盾/覇/衛）
- [ ] 刻印C1のヒットボックスが刻印種別に応じて変わる

### 究極強化 (UltimateEnhancement)
- [ ] 究極強化発動で30秒バフが適用される
- [ ] 究極強化中にATK×1.5が適用される
- [ ] 究極強化中にDEF×1.5が適用される
- [ ] 究極強化中に移動速度×1.2が適用される
- [ ] 究極強化中にアーマーレベル+1される
- [ ] 30秒経過で究極強化が自動解除される
- [ ] 死亡時に究極強化がリセットされる

### ブレイクチャージ (ComboSystem)
- [ ] L2（Rキー）でブレイクチャージ（BC）が発動する
- [ ] ダッシュ中L2でダッシュブレイクチャージ（DBC）が発動する
- [ ] 空中でL2で空中ブレイクチャージ（ABC）が発動する
- [ ] 連続BC（2秒以内）でブレイクラッシュスタックが増加する
- [ ] スタック最大5でATK+50%ボーナス
- [ ] BC中は武器2のヒットボックスが使用される

---

## デバッグキー早見表

| キー | 機能 |
|------|------|
| F1 | 相手を Hitstun トグル |
| F2 | 相手を Launch トグル |
| F3 | 自分の無双ゲージ MAX |
| F4 | 相手を EG展開トグル |
| F5 | 相手を自分の正面2mに移動 |
| F6 | 相手にガード状態を強制トグル |
| F7 | 自分のHPを20%に設定 |
| F8 | 相手を自分の背面2mに移動 |
| F9 | 全員のHP全回復 + Dead復活 |
| F10 | 相手のアーマー段階+1（ループ） |
| F12 | GUI表示トグル |

---

## バグ報告メモ

### バグ #1
```
日時:
マイルストーン: M?
重要度: 高/中/低
症状:
再現手順:
```

### バグ #2
```
日時:
マイルストーン: M?
重要度: 高/中/低
症状:
再現手順:
```

### バグ #3
```
日時:
マイルストーン: M?
重要度: 高/中/低
症状:
再現手順:
```

### バグ #4
```
日時:
マイルストーン: M?
重要度: 高/中/低
症状:
再現手順:
```

### バグ #5
```
日時:
マイルストーン: M?
重要度: 高/中/低
症状:
再現手順:
```
